<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Belservice • Dashboard</title>
<style>
  :root{--bg1:#e9f2eb;--bg2:#efe8e6;--card:#fff;--ink:#0f1720;--muted:#6b7280;--line:#e5e7eb;--green:#138a43;--red:#c52e34}
  body{margin:0;font-family:Inter,system-ui,sans-serif;color:var(--ink);
    background:radial-gradient(1200px 600px at 10% 10%,var(--bg1),var(--bg2))}
  .wrap{max-width:1000px;margin:56px auto;padding:0 16px}
  header{display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:22px}
  .flag{width:28px;height:28px;border-radius:8px;background:linear-gradient(90deg,#1e9b3f 33%,#fff 33% 66%,#d21f2b 0);box-shadow:0 3px 10px rgba(0,0,0,.08)}
  h1{margin:0;font-size:28px}
  .login{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:10px 0 18px}
  .login input{padding:10px 12px;border-radius:12px;border:1px solid var(--line)}
  .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer;background:#111;color:#fff}
  .muted{color:var(--muted)}
  .grid{display:grid;gap:18px;grid-template-columns:1fr}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 12px 24px rgba(0,0,0,.08);padding:18px}
  .card h2{margin:0 0 6px}
  .card p{margin:0 0 12px;color:var(--muted)}
  .cta{display:inline-block;padding:12px 14px;border-radius:12px;font-weight:800;color:#fff;text-decoration:none}
  .green{background:var(--green)}
  .red{background:var(--red)}
  .tip{margin-top:14px;text-align:center;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="flag"></div>
      <h1>Belservice • Dashboard</h1>
    </header>

    <!-- Login die de Basic token bewaart voor andere pagina's -->
    <div class="login">
      <input id="user" type="text" placeholder="admin" autocomplete="username" />
      <input id="pass" type="password" placeholder="wachtwoord" autocomplete="current-password" />
      <button class="btn" id="btnLogin">Inloggen</button>
      <span id="loginMsg" class="muted"></span>
    </div>

    <div class="grid">
      <section class="card">
        <h2>Live instellingen</h2>
        <p>Belbot aan/uit, keukenstatus, bezorging/afhalen en extra bereidingstijd.</p>
        <a class="cta green" href="live.html">Open live instellingen</a>
      </section>

      <section class="card">
        <h2>Rapportage</h2>
        <p>Overzicht en export. (optioneel, later uit te werken)</p>
        <a class="cta red" href="report.html">Open rapportage</a>
      </section>
    </div>

    <p class="tip">Tip: maak van deze pagina een vaste link voor Adam.</p>
  </div>

<script>
  // Bewaar Basic Auth in sessionStorage zodat live.html hem kan gebruiken
  function basicAuth(u,p){ return 'Basic ' + btoa(u + ':' + p); }
  async function apiPing(auth){
    const res = await fetch('/runtime/status', {headers:{'Authorization':auth,'Accept':'application/json'}});
    return res.ok;
  }
  document.getElementById('btnLogin').addEventListener('click', async ()=>{
    const u=document.getElementById('user').value.trim();
    const p=document.getElementById('pass').value;
    const auth=basicAuth(u,p);
    document.getElementById('loginMsg').textContent='controleren…';
    try{
      const ok = await apiPing(auth);
      if(ok){
        sessionStorage.setItem('auth', auth);
        document.getElementById('loginMsg').textContent='ingelogd';
      } else {
        sessionStorage.removeItem('auth');
        document.getElementById('loginMsg').textContent='login mislukt';
      }
    }catch(e){
      sessionStorage.removeItem('auth');
      document.getElementById('loginMsg').textContent='login mislukt';
    }
  });

  // Toon direct of je nog ingelogd bent
  if(sessionStorage.getItem('auth')){
    document.getElementById('loginMsg').textContent='ingelogd';
  }
</script>
</body>
</html>
